<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- svn-version: ${svn.version} -->
<html>
  <head>
    <title>Jamon Tutorial - 2. Dynamic Content
</title>
    <meta name="keywords" content="template,templates,typed,dynamic,text,java,MVC,render,model-view-controller,typesafety,typesafe"></meta>
    <link rel="SHORTCUT ICON" href="/favicon.ico">
    <link rel="StyleSheet" href="../base.css" type="text/css" media="screen" />
  </head>

  <body>

    <div id="logo">
      <h1 id="logo1">Jamon</h1>
      <h3 id="logo2">a typed template engine for Java</h3>
    </div>

    <h3 id="tagline">
      <span class="tagline1">type</span> <span class="tagline2">safe</span> <span class="tagline3">templating</span><br />
    </h3>

    <div class="header" id="header1"><span /></div>
    <div class="header" id="header2"><span /></div>
    <div class="header" id="header3"><span /></div>
    <div class="header" id="header4"><span /></div>

    <div id="nav">
      <ul class="nav">
          <li class="nav"
    >
<a href="../index.html" >Home</a>
</li>

          <li class="nav"
    >
<a href="../Features.html" >Features</a>
</li>

          <li class="nav"
    >
<a href="../News.html" >News</a>
</li>

          <li class="nav"
    >
<a href="../Download.html" >Download</a>
</li>

          <li class="nav"
    >
<a href="../Contact.html" >Contact</a>
</li>

          <li class="nav"
    >
<a href="../About.html" >About</a>
</li>

        </ul>

        <ul class="nav">
          <li class="static">Documentation</li>
          <li class="nav"
    >
<a href="../Overview.html" >Overview</a>
</li>

          <li class="nav"
    id="current">
<a href="../tutorial/TutorialPath.html" >Tutorial</a>
</li>

          <li class="nav"
    >
<a href="../GeneratedTemplates.html" >Generated classes</a>
</li>

          <li class="nav"
    >
<a href="../UserGuide.html" >User's Guide</a>
</li>

          <li class="nav"
    >
<a href="../Ant.html" >Ant integration</a>
</li>

          <li class="nav"
    >
<a href="../Maven.html" >Maven integration</a>
</li>

          <li class="nav"
    >
<a href="../Eclipse.html" >Eclipse plugin</a>
</li>

          <li class="nav"
    >
<a href="../Servlets.html" >Servlet usage</a>
</li>

          <li class="nav"
    >
<a href="../Reference.html" >Reference manual</a>
</li>

          <li class="nav">
           <a href='../javadoc/index.html'>Javadoc</a>
          </li>
        </ul>
      </div>
      <div id="main">
        <div class="tutorialNav">
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample1.html">Previous</a>
  

    </span>
    <span class="tutorialNavContents">
      <a href="TutorialPath.html">Tutorial contents</a>
    </span>
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample3.html">Next</a>
  

    </span>
  </div>


<h2>Jamon Tutorial - 2. Dynamic Content
</h2>

Without the ability to compute text to display, Jamon would have no more capability than HTML.
Fortunately, Jamon has an expressive structure to specify what gets returned to the user.
<p>
Jamon allows the inclusion of any Java code in the template. Through
the use of the following tags, Java can be used process data or to
generate text to return from the template.

<p>

<table>
  <tr>
    <th>Tag</th>
    <th>Action</th></tr>
  <tr>
    <td><pre><% "<%java> ... </%java>" %></pre></td>
    <td>Everything between <code><% "<%java>" %></code> and <code><% "</%java>" %></code> is
        treated as Java code</td>
  </tr>
  <tr>
    <td><pre><% "<%java [Java code] %>" %></pre></td>
    <td>Everything between <code><% "<%java " %></code> and <code><% "%>" %></code> is
        treated as Java code</td>
  </tr>
  <tr>
    <td><pre><% "<% [java expression] %>" %></pre></td>
    <td>The Java code between the <code>&lt;%</code> and <code>%&gt;</code> is executed and the
        result is converted to a string and included inline with the text
        generated by the template. Note that there <strong>must</strong>
        be whitespace between <code>&lt;%</code> and start of the Java code.</td>
  </tr>
</table>

<p>

For small amounts of Java code, using <code>%</code> escaping is useful.
      <pre class="jamon">

&lt;%java String dayOfWeek = new java.text.SimpleDateFormat("EEEE").format(new java.util.Date()); %&gt;

</pre>


<p>
For larger chunks of Java code, using <code>&lt;%java></code> ...
<code>&lt;/%java></code> tags may be preferable:

      <pre class="jamon">

&lt;%java&gt;
  String[] forecasts = new String[] {
    "partly cloudy", "mostly cloudy", "sunny", "rain", "snow" };
  int whichForecast = (int) (Math.random() * 5);
  String forecast = forecasts[whichForecast];
&lt;/%java&gt;

</pre>

<p>

In order to include data computed by Java in the text returned by the
template, you must use the <em>emit</em> operator. This is the
<code>&lt;%</code> ... <code>%></code> tag. :

      <pre class="jamon">

Welcome to the free weather site.
The weather for &lt;% dayOfWeek %&gt; is &lt;% forecast %&gt;.
To get a better forecast, please sign up for our premium service.

</pre>


Jamon also has the following tags to help with flow control; they
behave analogously to their java counterparts.

<p>
<table>
  <tr>
    <td><pre>&lt;%while <span class="variable">conditional</span>>...&lt;/%while></pre></td>
  </tr>
  <tr>
    <td><pre>&lt;%for <span class="variable">init</span>; <span class="variable">conditional</span>; <span class="variable">update</span> %>...&lt;/%for></pre></td>
  </tr>
  <tr>
    <td><pre>&lt;%for <span class="variable">Type</span> <span class="variable">variable</span>: <span class="variable">iterable</span>>...&lt;/%for></pre></td>
  </tr>
  <tr>
    <td><pre>&lt;%if <span class="variable">condition1</span> %>..&lt;%elseif <span class="variable">condition2</span> %>...&lt;%else>....&lt;/%if></pre></td>
  </tr>
</table>
<p>

For example:
      <pre class="jamon">

&lt;%if forecast.equals("sunny") %&gt;Go to the beach!&lt;%else&gt;Stay home and read a book!&lt;/%if&gt;
Our premium service can forecast
&lt;%for int i = 1; i &lt; 5; i++ %&gt;&lt;% i %&gt;, &lt;/%for&gt;5 and 6 days ahead.  Check it out!

Note: Around here, the weather is always one of:
&lt;%for String possibility : forecasts %&gt;  &lt;% possibility %&gt;
&lt;/%for&gt;

</pre>



<h3> Creating a template with dynamic content. </h3>
<p>
<ol>
<li>
Putting this all together in a Jamon template produces
 <a href="TimeAndTempTemplate.jamon" class="file"><code>TimeAndTempTemplate.jamon</code></a>:
<pre class="jamon">&lt;%java String dayOfWeek = new java.text.SimpleDateFormat("EEEE").format(new java.util.Date()); %&gt;
&lt;%java&gt;
  String[] forecasts = new String[] {
    "partly cloudy", "mostly cloudy", "sunny", "rain", "snow" };
  int whichForecast = (int) (Math.random() * 5);
  String forecast = forecasts[whichForecast];
&lt;/%java&gt;
Welcome to the free weather site.
The weather for &lt;% dayOfWeek %&gt; is &lt;% forecast %&gt;.
To get a better forecast, please sign up for our premium service.
&lt;%if forecast.equals("sunny") %&gt;Go to the beach!&lt;%else&gt;Stay home and read a book!&lt;/%if&gt;
Our premium service can forecast
&lt;%for int i = 1; i &lt; 5; i++ %&gt;&lt;% i %&gt;, &lt;/%for&gt;5 and 6 days ahead.  Check it out!

Note: Around here, the weather is always one of:
&lt;%for String possibility : forecasts %&gt;  &lt;% possibility %&gt;
&lt;/%for&gt;
</pre>


<li> To call the template, create a java class such as:
<a href="TimeAndTempTut2.java" class="file"><code>TimeAndTempTut2.java</code></a>:
<pre class="java">import java.io.OutputStreamWriter;

public class TimeAndTempTut2 {
  public static void main(String[] argv) throws Exception {
    new TimeAndTempTemplate().render(new OutputStreamWriter(System.out));
  }
}
</pre>


<li>
Set your classpath:
<table>
  <tr>
    <td class="system">Windows</td>
   <td class="tty">C:\JAMONTMP&gt; SET CLASSPATH=.;\path\to\jamon-runtime.jar;\path\to\jamon-api.jar;\path\to\jamon-processor.jar</td>
  </tr>
  <tr>
    <td class="system">Unix (sh, bash, zsh, ksh)</td>
    <td class="tty">$ export CLASSPATH=.:/path/to/jamon-runtime.jar:/path/to/jamon-api.jar:/path/to/jamon-processor.jar</td>
  </tr>
  <tr>
    <td class="system">Unix (csh, tcsh)</td>
    <td class="tty">% setenv CLASSPATH=.:/path/to/jamon-runtime.jar:/path/to/jamon-api.jar:/path/to/jamon-processor.jar</td>
  </tr>
</table>


<li>
Process the template:
<pre class="tty">java org.jamon.TemplateProcessor --destDir=. TimeAndTemplateTemplate</pre>

<li>
Compile everything:
<pre class="tty">javac TimeAndTempTut2.java TimeAndTempTemplate*.java</pre>

<li>
Run it:
<pre class="tty">java TimeAndTempTut2</pre>

<li>
You should see:
<pre class="tty">
Welcome to the free weather site.
The weather for Wednesday is sunny.
To get a better forecast, please sign up for our premium service.
Go to the beach!
Our premium service can forecast
1, 2, 3, 4, 5 and 6 days ahead.  Check it out!

Note: Around here, the weather is always one of:
  partly cloudy
  mostly cloudy
  sunny
  rain
  snow

</pre>


</ol>

<p>

<div class="tutorialNav">
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample1.html">Previous</a>
  

    </span>
    <span class="tutorialNavContents">
      <a href="TutorialPath.html">Tutorial contents</a>
    </span>
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample3.html">Next</a>
  

    </span>
  </div>





      </div>

    <div id="logo">
    <h1 id="logo1">Jamon</h1>
    <h3 id="logo2">a typed template engine for Java</h3>
    </div>


  </body>
</html>

