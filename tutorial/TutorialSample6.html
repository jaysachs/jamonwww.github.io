<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- svn-version: ${svn.version} -->
<html>
  <head>
    <title>Jamon Tutorial - 6. Calling Another Template From a Template
</title>
    <meta name="keywords" content="template,templates,typed,dynamic,text,java,MVC,render,model-view-controller,typesafety,typesafe"></meta>
    <link rel="SHORTCUT ICON" href="/favicon.ico">
    <link rel="StyleSheet" href="../base.css" type="text/css" media="screen" />
  </head>

  <body>

    <div id="logo">
      <h1 id="logo1">Jamon</h1>
      <h3 id="logo2">a typed template engine for Java</h3>
    </div>

    <h3 id="tagline">
      <span class="tagline1">type</span> <span class="tagline2">safe</span> <span class="tagline3">templating</span><br />
    </h3>

    <div class="header" id="header1"><span /></div>
    <div class="header" id="header2"><span /></div>
    <div class="header" id="header3"><span /></div>
    <div class="header" id="header4"><span /></div>

    <div id="nav">
      <ul class="nav">
          <li class="nav"
    >
<a href="../index.html" >Home</a>
</li>

          <li class="nav"
    >
<a href="../Features.html" >Features</a>
</li>

          <li class="nav"
    >
<a href="../News.html" >News</a>
</li>

          <li class="nav"
    >
<a href="../Download.html" >Download</a>
</li>

          <li class="nav"
    >
<a href="../Contact.html" >Contact</a>
</li>

          <li class="nav"
    >
<a href="../About.html" >About</a>
</li>

        </ul>

        <ul class="nav">
          <li class="static">Documentation</li>
          <li class="nav"
    >
<a href="../Overview.html" >Overview</a>
</li>

          <li class="nav"
    id="current">
<a href="../tutorial/TutorialPath.html" >Tutorial</a>
</li>

          <li class="nav"
    >
<a href="../GeneratedTemplates.html" >Generated classes</a>
</li>

          <li class="nav"
    >
<a href="../UserGuide.html" >User's Guide</a>
</li>

          <li class="nav"
    >
<a href="../Ant.html" >Ant integration</a>
</li>

          <li class="nav"
    >
<a href="../Maven.html" >Maven integration</a>
</li>

          <li class="nav"
    >
<a href="../Eclipse.html" >Eclipse plugin</a>
</li>

          <li class="nav"
    >
<a href="../Servlets.html" >Servlet usage</a>
</li>

          <li class="nav"
    >
<a href="../Reference.html" >Reference manual</a>
</li>

          <li class="nav">
           <a href='../javadoc/index.html'>Javadoc</a>
          </li>
        </ul>
      </div>
      <div id="main">
        <div class="tutorialNav">
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample5.html">Previous</a>
  

    </span>
    <span class="tutorialNavContents">
      <a href="TutorialPath.html">Tutorial contents</a>
    </span>
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample7.html">Next</a>
  

    </span>
  </div>


<h2>Jamon Tutorial - 6. Calling Another Template From a Template
</h2>

Jamon templates can call other templates. The semantics are exactly
the same as a method call in Java. The only difference is the syntax.
<p> In Jamon, a template calls another template with the
<nobr><code>&lt;& templateName ; arguments &></code></nobr>
tag. (Notice that the tag delimeters are <nobr><code>&lt;&</code> and
<code>&></code></nobr> -- <em>not</em> <nobr><code>&lt;%</code></nobr> and
<code>%></code>.) Some examples of calling templates from a template
are shown below.

      <pre class="jamon">
  &lt;%import&gt;
    java.util.Date;
  &lt;/%import&gt;

  &lt;&amp; header &amp;&gt;
  &lt;&amp; /org/foo/weather/ForecastTemplate; time = new Date();
     message = "Thank you for using our wearther service!" &amp;&gt;
  &lt;&amp; /com/tripleclick/ads/Advertisement &amp;&gt;
  &lt;&amp; footer &amp;&gt;</pre>


This template calls the <code>header</code> and <code>footer</code>
templates from the same package (directory) as this template. It also
calls the <code>ForcastTemplate</code> in the
<code>org.foo.weather</code> package and the
<code>Advertisement</code> template in the
<code>com.tripleclick.ads</code> package. The call to the
<code>ForecastTemplate</code> provides arguments to the call. These
arguments may be required or they may be optional; there is no
difference in how required and optional argument values are provided
by the caller in Jamon.

<p> Arguments to template calls are assigned by name. The name of the
argument is the name specified in the <nobr><code>&lt;%args&gt;</code>
... <code>&lt;/%args&gt;</code></nobr> tag of the called template. The
name should be followed by <code>=&gt;</code> and then the value of
the argument. The value is evaluated as Java code, so it may be any
Java expression.  Multiple arguments should be separated by semicolons.

<h3>An Example</h3>

    The template below, <a href="JamonCallerTemplate.jamon" class="file"><code>JamonCallerTemplate.jamon</code></a>, outputs several rows
    of names and telephone numbers.
    <pre class="jamon">&lt;%args&gt;
  String[] names;
  String[] phoneNumbers;
&lt;/%args&gt;
&lt;table&gt;
&lt;%for int i=0; i&lt;names.length; i++ %&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;% names[i] %&gt;&lt;/td&gt;
    &lt;td&gt;&lt;&amp; StdPhoneNumberFormat; number = phoneNumbers[i].trim();
           separator = "-" &amp;&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/%for&gt;
&lt;/table&gt;
</pre>


    It calls the template <a href="StdPhoneNumberFormat.jamon" class="file"><code>StdPhoneNumberFormat.jamon</code></a> (below)
    to format the telephone number into a specified format.
    The <code>separator</code> argument to the
    <code>StdPhoneNumberFormat</code> template is
    optional, so the <code>JamonCallerTemplate</code> only has to provide
    a value to override the default.

    <pre class="jamon">&lt;%args&gt;
  String number;
  String separator = ".";
&lt;/%args&gt;\
&lt;%if number.length() == 7 %&gt;\
&lt;% number.substring( 0, 3 ) %&gt;&lt;% separator %&gt;&lt;% number.substring( 3 ) %&gt;\
&lt;%elseif number.length() == 10 %&gt;\
&lt;% number.substring( 0, 3 ) %&gt;&lt;% separator %&gt;\
&lt;% number.substring( 3, 6 ) %&gt;&lt;% separator %&gt;&lt;% number.substring( 6 ) %&gt;\
&lt;%else&gt;&lt;% number %&gt;&lt;/%if&gt;
</pre>


<div class="note">Notice that the <code>StdPhoneNumberFormat</code>
template adds backslashes, '\', at the end of each line that outputs
text (the non-java code lines). The backslash at the end of the line
escapes the new-line on that line. Jamon outputs text exactly as it
appears in the template, including new-lines. To prevent new-lines
from being output, each Jamon line must end with a backslash.
</div>

    The top level template, <code>JamonCallerTemplate</code> is called
    from the Java class
     <a href="JamonCallerTut6.java" class="file"><code>JamonCallerTut6.java</code></a>:
    <pre class="java">import java.io.OutputStreamWriter;

public class JamonCallerTut6 {
  public static void main(String[] argv) throws Exception {
    String[] names = new String[] {
      "John Public", "Mary Private", "Lee Protected"};
    String[] phoneNumbers = new String[] {
      "5550324", "4135559232", "4135551212" };
    new JamonCallerTemplate()
      .render(new OutputStreamWriter(System.out), names, phoneNumbers);
  }
}
</pre>

<li> To process and run the template, execute the following commands:
<pre class="tty">
    export CLASSPATH=.:/path/to/jamon-runtime.jar:/path/to/jamon-api.jar:/path/to/jamon-processor.jar
    java org.jamon.TemplateProcessor --destDir=. JamonCallerTemplate SpacerTemplate
    javac JamonCallerTut6.java JamonCallerTemplate*.java SpacerTemplate*.java
    java JamonCallerTut6
</pre>

<li> You should see:
<pre class="tty">
&lt;table&gt;

  &lt;tr&gt;
    &lt;td&gt;John Public&lt;/td&gt;
    &lt;td&gt;555-0324&lt;/td&gt;
  &lt;/tr&gt;

  &lt;tr&gt;
    &lt;td&gt;Mary Private&lt;/td&gt;
    &lt;td&gt;413-555-9232&lt;/td&gt;
  &lt;/tr&gt;

  &lt;tr&gt;
    &lt;td&gt;Lee Protected&lt;/td&gt;
    &lt;td&gt;413-555-1212&lt;/td&gt;
  &lt;/tr&gt;

&lt;/table&gt;</pre>


<div class="tutorialNav">
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample5.html">Previous</a>
  

    </span>
    <span class="tutorialNavContents">
      <a href="TutorialPath.html">Tutorial contents</a>
    </span>
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample7.html">Next</a>
  

    </span>
  </div>





      </div>

    <div id="logo">
    <h1 id="logo1">Jamon</h1>
    <h3 id="logo2">a typed template engine for Java</h3>
    </div>


  </body>
</html>

