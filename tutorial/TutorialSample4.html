<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- svn-version: ${svn.version} -->
<html>
  <head>
    <title>Jamon Tutorial - 4. Escaping Text
</title>
    <meta name="keywords" content="template,templates,typed,dynamic,text,java,MVC,render,model-view-controller,typesafety,typesafe"></meta>
    <link rel="SHORTCUT ICON" href="/favicon.ico">
    <link rel="StyleSheet" href="../base.css" type="text/css" media="screen" />
  </head>

  <body>

    <div id="logo">
      <h1 id="logo1">Jamon</h1>
      <h3 id="logo2">a typed template engine for Java</h3>
    </div>

    <h3 id="tagline">
      <span class="tagline1">type</span> <span class="tagline2">safe</span> <span class="tagline3">templating</span><br />
    </h3>

    <div class="header" id="header1"><span /></div>
    <div class="header" id="header2"><span /></div>
    <div class="header" id="header3"><span /></div>
    <div class="header" id="header4"><span /></div>

    <div id="nav">
      <ul class="nav">
          <li class="nav"
    >
<a href="../index.html" >Home</a>
</li>

          <li class="nav"
    >
<a href="../Features.html" >Features</a>
</li>

          <li class="nav"
    >
<a href="../News.html" >News</a>
</li>

          <li class="nav"
    >
<a href="../Download.html" >Download</a>
</li>

          <li class="nav"
    >
<a href="../Contact.html" >Contact</a>
</li>

          <li class="nav"
    >
<a href="../About.html" >About</a>
</li>

        </ul>

        <ul class="nav">
          <li class="static">Documentation</li>
          <li class="nav"
    >
<a href="../Overview.html" >Overview</a>
</li>

          <li class="nav"
    id="current">
<a href="../tutorial/TutorialPath.html" >Tutorial</a>
</li>

          <li class="nav"
    >
<a href="../GeneratedTemplates.html" >Generated classes</a>
</li>

          <li class="nav"
    >
<a href="../UserGuide.html" >User's Guide</a>
</li>

          <li class="nav"
    >
<a href="../Ant.html" >Ant integration</a>
</li>

          <li class="nav"
    >
<a href="../Maven.html" >Maven integration</a>
</li>

          <li class="nav"
    >
<a href="../Eclipse.html" >Eclipse plugin</a>
</li>

          <li class="nav"
    >
<a href="../Servlets.html" >Servlet usage</a>
</li>

          <li class="nav"
    >
<a href="../Reference.html" >Reference manual</a>
</li>

          <li class="nav">
           <a href='../javadoc/index.html'>Javadoc</a>
          </li>
        </ul>
      </div>
      <div id="main">
        <div class="tutorialNav">
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample3.html">Previous</a>
  

    </span>
    <span class="tutorialNavContents">
      <a href="TutorialPath.html">Tutorial contents</a>
    </span>
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample5.html">Next</a>
  

    </span>
  </div>


<h2>Jamon Tutorial - 4. Escaping Text
</h2>

Templates usually construct text in a structured language such as HTML or XML, or even URLs. Each of these languages has restrictions on allowed characters or sequence of characters. Escaping modifies a string to adhere to the rules of the particular language in which the string will be expressed.

<h3> Rules for escaping text </h3>

  <ol>
    <li><span class="concept">Static content</span>

      In general, any characters appearing in a template are output
      literally, whitespace included.  One notable exception is that
      if a newline is preceded by a backslash, then neither the newline nor
      the backslash are output.

    <li><span class="concept">Emit statements</span>

      The value of a java expression can be emitted by enclosing the
      expression in <code>&lt;%...%&gt;</code> pairs, e.g.
      <pre class="jamon">
&lt;% person.getFirstName().substring(0,10) %&gt;
</pre>

      <p>
      <div class="note">&nbsp;Note that there must be at least one
      whitespace character following the <code>&lt;%</code>.&nbsp;</div>

      <p>

      Before a Java expression is emitted, the string that represents
      it is <em>escaped</em>.  The usual default escaping mechanism is
      HTML, so for example the following template

      <pre class="jamon">this &lt;% "&amp;" %&gt; that</pre>


      produces

      <pre class="tty">this &amp;amp; that</pre>

      However different escaping mechanisms can be specified in the
      template itself.  A string can be emitted with no escaping as
      follows:

      <pre class="jamon">this &lt;% "&amp;" #n %&gt; that</pre>


      producing

      <pre class="tty">this &amp; that</pre>

      The available escaping mechanism are
      <ul>
        <li>
          HTML (use <code>#h</code> in the emit block) -- produces
          output suitable for inclusion in the body of HTML elements
        </li>
        <li>
          Strict HTML (use <code>#H</code> in the emit block) --
          produces output suitable for use as an HTML attribute value
          (it is similar to HTML escaping but also escapes quotes and
          apostrophes)
        </li>
        <li>XML (use <code>#x</code> in the emit block)</li>
        <li>URL (use <code>#u</code> in the emit block)</li>
        <li>None (use <code>#n</code> in the emit block)</li>
      </ul>

      <p>

    <li><span class="concept">Setting the default escaping mechanism</span>

       The default escaping rule for a template is HTML.  This default
       can be changed for a particular template by using the
       directive <code><%escape #?></code>.
  </ol>



    <h4>Example</h4>

    Suppose the template
     <a href="EscapingTemplateA.jamon" class="file"><code>EscapingTemplateA.jamon</code></a> contains
    <pre class="jamon">&lt;%args&gt;
  String name = "Somebody";
  String greeting;
&lt;/%args&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;% greeting %&gt; &lt;% name %&gt; &lt;br /&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>


<p>
If this template is called by the java code
<a href="EscapingTut4a.java" class="file"><code>EscapingTut4a.java</code></a>:
<pre class="java">import java.io.OutputStreamWriter;

public class EscapingTut4a {
  public static void main(String[] argv) throws Exception {
    new EscapingTemplateA()
      .setName("Duke &amp; Co.")
      .render(new OutputStreamWriter(System.out), "Hello");
  }
}
</pre>


Then the output of the template's <code>render</code> method will be
<pre class="tty">
&lt;html&gt;
  &lt;body&gt;
    Hello Duke &amp;amp; Co. &lt;br /&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>


<p>
In contrast, if the template
     <a href="EscapingTemplateB.jamon" class="file"><code>EscapingTemplateB.jamon</code></a> containing
    <pre class="jamon">&lt;%escape #n&gt;

&lt;%args&gt;
  String name = "Somebody";
  String greeting;
&lt;/%args&gt;

&lt;html&gt;
  &lt;body&gt;
    &lt;% greeting %&gt; &lt;% name %&gt; &lt;br /&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>


<p>
is called by the java code
<a href="EscapingTut4b.java" class="file"><code>EscapingTut4b.java</code></a>:
<pre class="java">import java.io.OutputStreamWriter;

public class EscapingTut4b {
  public static void main(String[] argv) throws Exception {
    new EscapingTemplateB()
      .setName("Duke &amp; Co.")
      .render(new OutputStreamWriter(System.out), "Hello");
  }
}
</pre>


Then the output of the template's <code>render</code> method will be
<pre class="tty">
&lt;html&gt;
  &lt;body&gt;
    Hello Duke &amp; Co. &lt;br /&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>


<div class="tutorialNav">
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample3.html">Previous</a>
  

    </span>
    <span class="tutorialNavContents">
      <a href="TutorialPath.html">Tutorial contents</a>
    </span>
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample5.html">Next</a>
  

    </span>
  </div>





      </div>

    <div id="logo">
    <h1 id="logo1">Jamon</h1>
    <h3 id="logo2">a typed template engine for Java</h3>
    </div>


  </body>
</html>

