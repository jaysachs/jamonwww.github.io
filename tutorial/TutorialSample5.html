<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- svn-version: ${svn.version} -->
<html>
  <head>
    <title>Jamon Tutorial - 5. More Advanced Jamon Tags
</title>
    <meta name="keywords" content="template,templates,typed,dynamic,text,java,MVC,render,model-view-controller,typesafety,typesafe"></meta>
    <link rel="SHORTCUT ICON" href="/favicon.ico">
    <link rel="StyleSheet" href="../base.css" type="text/css" media="screen" />
  </head>

  <body>

    <div id="logo">
      <h1 id="logo1">Jamon</h1>
      <h3 id="logo2">a typed template engine for Java</h3>
    </div>

    <h3 id="tagline">
      <span class="tagline1">type</span> <span class="tagline2">safe</span> <span class="tagline3">templating</span><br />
    </h3>

    <div class="header" id="header1"><span /></div>
    <div class="header" id="header2"><span /></div>
    <div class="header" id="header3"><span /></div>
    <div class="header" id="header4"><span /></div>

    <div id="nav">
      <ul class="nav">
          <li class="nav"
    >
<a href="../index.html" >Home</a>
</li>

          <li class="nav"
    >
<a href="../Features.html" >Features</a>
</li>

          <li class="nav"
    >
<a href="../News.html" >News</a>
</li>

          <li class="nav"
    >
<a href="../Download.html" >Download</a>
</li>

          <li class="nav"
    >
<a href="../Contact.html" >Contact</a>
</li>

          <li class="nav"
    >
<a href="../About.html" >About</a>
</li>

        </ul>

        <ul class="nav">
          <li class="static">Documentation</li>
          <li class="nav"
    >
<a href="../Overview.html" >Overview</a>
</li>

          <li class="nav"
    id="current">
<a href="../tutorial/TutorialPath.html" >Tutorial</a>
</li>

          <li class="nav"
    >
<a href="../GeneratedTemplates.html" >Generated classes</a>
</li>

          <li class="nav"
    >
<a href="../UserGuide.html" >User's Guide</a>
</li>

          <li class="nav"
    >
<a href="../Ant.html" >Ant integration</a>
</li>

          <li class="nav"
    >
<a href="../Maven.html" >Maven integration</a>
</li>

          <li class="nav"
    >
<a href="../Eclipse.html" >Eclipse plugin</a>
</li>

          <li class="nav"
    >
<a href="../Servlets.html" >Servlet usage</a>
</li>

          <li class="nav"
    >
<a href="../Reference.html" >Reference manual</a>
</li>

          <li class="nav">
           <a href='../javadoc/index.html'>Javadoc</a>
          </li>
        </ul>
      </div>
      <div id="main">
        <div class="tutorialNav">
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample4.html">Previous</a>
  

    </span>
    <span class="tutorialNavContents">
      <a href="TutorialPath.html">Tutorial contents</a>
    </span>
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample6.html">Next</a>
  

    </span>
  </div>


<h2>Jamon Tutorial - 5. More Advanced Jamon Tags
</h2>

Jamon templates are translated into Java classes and interfaces. Jamon
provides several tags to give the template author more control over
how declarations in the template get translated into Java constructs.

<ol>
  <li><span class="concept">Jamon comments</span>
    The Jamon comment tag, <code>&lt;%doc></code> ... <code>&lt;/%doc></code>
    causes all text between the begin and end tags to be ignored by
    the Jamon processor and the Java compiler.

  <li><span class="concept">Import statements</span>

    The example templates shown up to this point have completely
specified every Java class not in the <code>java.lang</code>
package. In the tutorial section on <a
href="TutorialSample3.html">Templates with arguments</a> the examples
contained the declarations

      <pre class="jamon">

&lt;%args&gt;
  java.util.Date effectiveDate;
  String userName;
  java.math.BigDecimal totalBalance;
&lt;/%args&gt;

</pre>

    <p>
    Jamon provides the <code>&lt;%import></code> ... <code>&lt;/%import></code>
    tag to allow the user to import classes for the template.
      <pre class="jamon">

&lt;%import&gt;
  java.util.Date;
  java.math.BigDecimal;
&lt;/%import&gt;
&lt;%args&gt;
  Date effectiveDate;
  String userName;
  BigDecimal totalBalance;
&lt;/%args&gt;

</pre>

Static imports can be acheived with the <code>static</code> keyword;
for example:
      <pre class="jamon">

&lt;%import&gt;
  static java.lang.math.abs;
&lt;/%import&gt;
The difference between 2 and 4 is &lt;% abs(2 - 4) %&gt;.

</pre>


  <li><span class="concept">Class scope declarations</span> The Java
    code included in the template by the <code>%</code> and
    <code>&lt;%java></code> ... <code>&lt;/%java></code> escapes, as
    well as that in the <code>&lt;%if...%></code>,
    <code>&lt;%elseif...%></code>, <code>&lt;%for...%></code>, and
    <code>&lt;%whilte...%></code> tags, is translated into statements
    inside methods on a Java class created from the template.
    <p>
    For example, the template fragment below
      <pre class="jamon">

&lt;%java int count = 3; %&gt;
&lt;%while count-- &gt; 0 %&gt;Hello world!
&lt;/%while&gt;

</pre>

    is translated into Java code inside a method that looks something like:

<pre class="code">
    int count = 3;
    while (count-- > 0) {
      this.write("Hello world!\n");
    }
</pre>
    To add variables or methods to the class which contains these
    methods, use the <code>&lt;%class></code> ... <code>&lt;/%class></code>
    tag. For example, the following Jamon template
    <pre class="jamon">
&lt;%class&gt;
  static int pageViews = 1;
&lt;/%class&gt;
This component has been accessed &lt;% pageViews++ %&gt; times.
</pre>

    generates a Java file looking something like
<pre class="java">
public class SomeTemplateImpl
{
  static int pageViews = 1;

  public void render() throws java.io.IOException
  {
    this.write("\nThis component has been accessed ");
    this.writeEscaped(this.valueOf(pageViews++ ));
    this.write(" times.\n\n");
  }
}
</pre>
 <p>
    Any Java code that is legal at the class level, including fields,
methods, and classes, may be declared in a Jamon template between the
<code>&lt;%class></code> ... <code>&lt;/%class></code> tags.
</ol>
<h3>An Example</h3>
    The template below,      <a href="ClassExampleTemplate.jamon" class="file"><code>ClassExampleTemplate.jamon</code></a>,
    imports three classes, <code>java.util.Date, java.text.DateFormat</code>,
    and <code>java.text.SimpleDateFormat</code>. It also defines two
    class static fields and one method. The template code uses all of
    these fields and method to output the desired text.
    <pre class="jamon">&lt;%import&gt;
  java.util.Date;
  java.text.SimpleDateFormat;
  java.text.DateFormat;
&lt;/%import&gt;
&lt;%args&gt;
  Date currentTime;
  int count;
&lt;/%args&gt;
&lt;%class&gt;
  private static int iterationCount = 0;
  private static DateFormat dateFormat = new SimpleDateFormat();
  private String formatDate(Date date) {
    return dateFormat.format(date);
  }
&lt;/%class&gt;

&lt;%for int i = 1; i &lt;= count; ++i %&gt;\
        Hello world! The time is &lt;% formatDate(currentTime) %&gt;.
        This template type has been called &lt;% ++iterationCount %&gt; times.
&lt;/%for&gt;
</pre>


<p>
When this template is called by the java code
<a href="ClassExampleTut5.java" class="file"><code>ClassExampleTut5.java</code></a>:
<pre class="java">import java.io.OutputStreamWriter;
import java.util.Date;

public class ClassExampleTut5 {
  public static void main(String[] argv) throws Exception {
    new ClassExampleTemplate()
      .render(new OutputStreamWriter(System.out), new Date(), 3);
  }
}
</pre>


the output of the template's <code>render</code> method will be
<pre class="tty">
        Hello world! The time is 8/12/09 8:38 PM.
        This template type has been called 1 times.
        Hello world! The time is 8/12/09 8:38 PM.
        This template type has been called 2 times.
        Hello world! The time is 8/12/09 8:38 PM.
        This template type has been called 3 times.
</pre>


<p>

<div class="tutorialNav">
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample4.html">Previous</a>
  

    </span>
    <span class="tutorialNavContents">
      <a href="TutorialPath.html">Tutorial contents</a>
    </span>
    <span class="tutorialNavNeighbor">
      
    <a href="TutorialSample6.html">Next</a>
  

    </span>
  </div>





      </div>

    <div id="logo">
    <h1 id="logo1">Jamon</h1>
    <h3 id="logo2">a typed template engine for Java</h3>
    </div>


  </body>
</html>

