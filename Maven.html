<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- svn-version: ${svn.version} -->
<html>
  <head>
    <title>Using Jamon with Maven</title>
    <meta name="keywords" content="template,templates,typed,dynamic,text,java,MVC,render,model-view-controller,typesafety,typesafe"></meta>
    <link rel="SHORTCUT ICON" href="/favicon.ico">
    <link rel="StyleSheet" href="base.css" type="text/css" media="screen" />
  </head>

  <body>

    <div id="logo">
      <h1 id="logo1">Jamon</h1>
      <h3 id="logo2">a typed template engine for Java</h3>
    </div>

    <h3 id="tagline">
      <span class="tagline1">type</span> <span class="tagline2">safe</span> <span class="tagline3">templating</span><br />
    </h3>

    <div class="header" id="header1"><span /></div>
    <div class="header" id="header2"><span /></div>
    <div class="header" id="header3"><span /></div>
    <div class="header" id="header4"><span /></div>

    <div id="nav">
      <ul class="nav">
          <li class="nav"
    >
<a href="index.html" >Home</a>
</li>

          <li class="nav"
    >
<a href="Features.html" >Features</a>
</li>

          <li class="nav"
    >
<a href="News.html" >News</a>
</li>

          <li class="nav"
    >
<a href="Download.html" >Download</a>
</li>

          <li class="nav"
    >
<a href="Contact.html" >Contact</a>
</li>

          <li class="nav"
    >
<a href="About.html" >About</a>
</li>

        </ul>

        <ul class="nav">
          <li class="static">Documentation</li>
          <li class="nav"
    >
<a href="Overview.html" >Overview</a>
</li>

          <li class="nav"
    >
<a href="tutorial/TutorialPath.html" >Tutorial</a>
</li>

          <li class="nav"
    >
<a href="GeneratedTemplates.html" >Generated classes</a>
</li>

          <li class="nav"
    >
<a href="UserGuide.html" >User's Guide</a>
</li>

          <li class="nav"
    >
<a href="Ant.html" >Ant integration</a>
</li>

          <li class="nav"
    id="current">
<a href="Maven.html" >Maven integration</a>
</li>

          <li class="nav"
    >
<a href="Eclipse.html" >Eclipse plugin</a>
</li>

          <li class="nav"
    >
<a href="Servlets.html" >Servlet usage</a>
</li>

          <li class="nav"
    >
<a href="Reference.html" >Reference manual</a>
</li>

          <li class="nav">
           <a href='javadoc/index.html'>Javadoc</a>
          </li>
        </ul>
      </div>
      <div id="main">
        <h3>Overview</h3>

<p>
  Within a Java program, each Jamon template is represented as an
  instance of a class specific to that template. In order for your
  program to compile, Jamon templates need to be translated into
  Java source classes, and those generated Java sources need to be
  included in the build of your project.
</p>

<h4>Assumptions</h4>
<ul>
  <li>Jamon templates are located in the directory
  tree named '<code>./src/templates</code>'
  <li>Java source files corresponding to Jamon
  templates will be generated into the directory
  '<code>./tsrc</code>'.
</ul>

<h3>Building with Maven</h3>

Jamon releases are now mirrored on the primary Maven repository sites
(<code>http://repo1.maven.org/<code>). All Jamon artifacts (aside from
Eclipse plugins) should be available there.

Generally, there are three sections of your pom.xml that will need
to be configured.

<h4>1. Compile and runtime dependency</h4>
<pre class="ant">
&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jamon&lt;/groupId&gt;
      &lt;artifactId&gt;jamon-runtime&lt;/artifactId&gt;
      &lt;version&gt;2.3.0&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</pre>

<h4>2. Hook into project build lifecycle</h4>

<pre class="ant">
&lt;build&gt;
    &lt;plugins&gt;
        ...
      &lt;plugin&gt;
        &lt;groupId&gt;org.jamon&lt;/groupId&gt;
        &lt;artifactId&gt;jamon-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;2.3.2&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;generate-sources&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;translate&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
        ...
    &lt;/plugins&gt;
&lt;/build&gt;
</pre>

<h4>3. (Optional) Hook into Eclipse</h4>

(Yes, this is far from optimal.)

Add the following to the <code>plugins</code> section, ensuring
the templateSourceDir and templateOutputDir match your project:

<pre class="ant">
  &lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
      &lt;additionalProjectnatures&gt;
        &lt;projectnature&gt;org.jamon.project.jamonnature&lt;/projectnature&gt;
      &lt;/additionalProjectnatures&gt;
      &lt;buildcommands&gt;
        &lt;buildcommand&gt;org.jamon.project.templateBuilder&lt;/buildcommand&gt;
        &lt;buildcommand&gt;org.eclipse.jdt.core.javabuilder&lt;/buildcommand&gt;
        &lt;buildcommand&gt;org.jamon.project.markerUpdater&lt;/buildcommand&gt;
      &lt;/buildcommands&gt;
      &lt;additionalConfig&gt;
         &lt;file&gt;
             &lt;name&gt;.settings/org.jamon.prefs&lt;/name&gt;
             &lt;content&gt;# now
eclipse.preferences.version=1
templateSourceDir=templates
templateOutputDir=tsrc
&lt;/content&gt;
        &lt;/file&gt;
      &lt;/additionalConfig&gt;
    &lt;/configuration&gt;
  &lt;/plugin&gt;
</pre>

<h3>Customizing the plugin</h3>

You can change the location where the plugin looks for template
sources and the locaiton where it generates Java files by
specifying the properties for <code>jamon.template.src</code>
and <code>jamon.template.output</code> in each <code>execution</code>
section above. For example, to root your template sources at
<code>src/main/jamon</code> and generate Java sources into
<code>src/gen</code>, your execution section would look like:

<pre class="ant">
&lt;build&gt;
    &lt;plugins&gt;
        ...
      &lt;plugin&gt;
        &lt;groupId&gt;org.jamon&lt;/groupId&gt;
        &lt;artifactId&gt;jamon-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;2.3.2&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;generate-sources&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;translate&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
               &lt;templateSourceDir&gt;src/main/jamon&lt;/templateSourceDir&gt;
               &lt;templateOutputDir&gt;src/gen&lt;/templateOutputDir&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
        ...
    &lt;/plugins&gt;
&lt;/build&gt;
</pre>


      </div>

    <div id="logo">
    <h1 id="logo1">Jamon</h1>
    <h3 id="logo2">a typed template engine for Java</h3>
    </div>


  </body>
</html>

