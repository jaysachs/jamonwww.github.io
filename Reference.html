<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- svn-version: ${svn.version} -->
<html>
  <head>
    <title>Jamon Template Reference Manual</title>
    <meta name="keywords" content="template,templates,typed,dynamic,text,java,MVC,render,model-view-controller,typesafety,typesafe"></meta>
    <link rel="SHORTCUT ICON" href="/favicon.ico">
    <link rel="StyleSheet" href="base.css" type="text/css" media="screen" />
  </head>

  <body>

    <div id="logo">
      <h1 id="logo1">Jamon</h1>
      <h3 id="logo2">a typed template engine for Java</h3>
    </div>

    <h3 id="tagline">
      <span class="tagline1">type</span> <span class="tagline2">safe</span> <span class="tagline3">templating</span><br />
    </h3>

    <div class="header" id="header1"><span /></div>
    <div class="header" id="header2"><span /></div>
    <div class="header" id="header3"><span /></div>
    <div class="header" id="header4"><span /></div>

    <div id="nav">
      <ul class="nav">
          <li class="nav"
    >
<a href="index.html" >Home</a>
</li>

          <li class="nav"
    >
<a href="Features.html" >Features</a>
</li>

          <li class="nav"
    >
<a href="News.html" >News</a>
</li>

          <li class="nav"
    >
<a href="Download.html" >Download</a>
</li>

          <li class="nav"
    >
<a href="Contact.html" >Contact</a>
</li>

          <li class="nav"
    >
<a href="About.html" >About</a>
</li>

        </ul>

        <ul class="nav">
          <li class="static">Documentation</li>
          <li class="nav"
    >
<a href="Overview.html" >Overview</a>
</li>

          <li class="nav"
    >
<a href="tutorial/TutorialPath.html" >Tutorial</a>
</li>

          <li class="nav"
    >
<a href="GeneratedTemplates.html" >Generated classes</a>
</li>

          <li class="nav"
    >
<a href="UserGuide.html" >User's Guide</a>
</li>

          <li class="nav"
    >
<a href="Ant.html" >Ant integration</a>
</li>

          <li class="nav"
    >
<a href="Maven.html" >Maven integration</a>
</li>

          <li class="nav"
    >
<a href="Eclipse.html" >Eclipse plugin</a>
</li>

          <li class="nav"
    >
<a href="Servlets.html" >Servlet usage</a>
</li>

          <li class="nav"
    id="current">
<a href="Reference.html" >Reference manual</a>
</li>

          <li class="nav">
           <a href='javadoc/index.html'>Javadoc</a>
          </li>
        </ul>
      </div>
      <div id="main">
        <h2>Template Reference Manual</h2>
<ol>
  <ol>
  
    <li><a href="#StaticContent">Static content</a>

  
    <li><a href="#EmitStatements">Emit statements</a>

  
    <li><a href="#FlowControl">Flow control</a>

  
    <li><a href="#ArbitraryJavaCode">Arbitrary Java code</a>

  
    <li><a href="#Inheritance">Inheritance</a>

  
    <li><a href="#ClassCode">Class code</a>

  
    <li><a href="#Comments">Comments</a>

  
    <li><a href="#Imports">Imports</a>

  
    <li><a href="#Implements">Implements</a>

  
    <li><a href="#Annotations">Annotations</a>

  
    <li><a href="#Arguments">Arguments</a>

  
    <li><a href="#InvokingOtherTemplates">Invoking other templates</a>

  
    <li><a href="#Subtemplates">Subtemplates</a>

  
    <li><a href="#FragmentArguments">Fragment arguments</a>

  
    <li><a href="#ParametrizedFragmentArguments">Parametrized fragment arguments</a>

  
    <li><a href="#Context">Context</a>

  
    <li><a href="#jamonProperties">jamon.properties</a>

  
    <li><a href="#Generics">Generics</a>

  
    <li><a href="#PathAliases">Path aliases</a>

  
    <li><a href="#CharacterEncoding">Character encoding</a>

  
  </ol>

  <li><a name="StaticContent"><span class="concept">Static content</span></a>


    In general, any characters appearing in a template are output
    literally, whitespace included.

    This excludes whitespace inside <code>&lt;%args&gt;</code>,
    <code>&lt;%xargs&gt;</code>, <code>&lt;%import&gt;</code>, <code>&lt;%alias&gt;</code>,
    <code>&lt;%absmeth&gt;</code>, <code>&lt;%generic&gt;</code>
    and <code>&lt;%frag&gt;</code> declarations.

    Other ignored white space includes whitespace immediately after
    the following tags:
    <ul class="referenceTagList">
      <li><code>&lt;%def ...&gt;</code> and <code>&lt;/%def&gt;</code></li>
      <li><code>&lt;%method ...&gt;</code> and <code>&lt;/%method&gt;</code></li>
      <li><code>&lt;%override ...&gt;</code> and <code>&lt;/%override&gt;</code></li>
      <li><code>&lt;/%absmeth&gt;</code></li>
      <li><code>&lt;/%alias&gt;</code></li>
      <li><code>&lt;/%args&gt;</code></li>
      <li><code>&lt;/%class&gt;</code></li>
      <li><code>&lt;/%doc&gt;</code></li>
      <li><code>&lt;/%frag&gt;</code></li>
      <li><code>&lt;/%generic&gt;</code></li>
      <li><code>&lt;/%implements&gt;</code></li>
      <li><code>&lt;/%import&gt;</code></li>
      <li><code>&lt;/%java&gt;</code></li>
      <li><code>&lt;/%xargs&gt;</code></li>
      <li><code>&lt;%abstract&gt;</code></li>
      <li><code>&lt;%annotate ...%&gt;</code></li>
      <li><code>&lt;%encoding ...&gt;</code></li>
      <li><code>&lt;%escape ...%&gt;</code></li>
    </ul>

    If you would like to force whitespace to appear after one of the
    above tags, you can follow the tag with a backslash and a
    newline; whitespace after that will be emitted.

    <br />
    <b>Newline escape</b><br />

    One other notable exception is that if a newline is preceded by
    a backslash, then neither the newline nor the backslash are
    output.

  <li><a name="EmitStatements"><span class="concept">Emit statements</span></a>


    The value of a java expression can be emitted by enclosing the
    expression in <code>&lt;% ...%&gt;</code> pairs, e.g.
    <pre class="jamon">
&lt;% person.getFirstName().substring(0,10) %&gt;
</pre>

    Note that there must be at least one whitespace character
    following the <code>&lt;%</code>.

    <p>

    Before a Java expression is emitted, the string that represents it
    is <em>escaped</em>.  The default escaping mechanism is HTML, so for
    example the following template

    <pre class="jamon">this &lt;% "&amp;" %&gt; that
</pre>

    produces

    <pre class="tty">this &amp;amp; that</pre>


    However different escaping mechanisms can be specified in the
    template itself.  A string can be emitted with no escaping as
    follows:

    <pre class="jamon">this &lt;% "&amp;" #n %&gt; that
</pre>

    producing

    <pre class="tty">this &amp; that</pre>


    JavaScript escaping is also available

    <pre class="jamon">&lt;a 
href="about:blank"
onclick="&lt;&amp;| /org/jamon/escape/StrictHtml 
  &amp;&gt;return confirm("&lt;% '"' +
                       "&lt;b&gt;this\n'n\nthat&lt;/b&gt;" +
                       '"' #j %&gt;")&lt;/&amp;&gt;"&gt;this&lt;/a&gt;
</pre>

    producing
    <pre class="tty">&lt;a 
href="about:blank"
onclick="return confirm(&amp;quot;\&amp;quot;&amp;lt;b&amp;gt;this\n\&amp;#39;n\nthat&amp;lt;/b&amp;gt;\&amp;quot;&amp;quot;)"&gt;this&lt;/a&gt;</pre>


    The available escaping mechanism are
    <ul>
      <li>
        HTML (use <code>#h</code> in the emit block) -- produces
        output suitable for inclusion in the body of HTML elements
      </li>
      <li>
        Strict HTML (use <code>#H</code> in the emit block) --
        produces output suitable for use as an HTML attribute value
        (it is similar to HTML escaping but also escapes quotes and
        apostrophes)
      </li>
      <li>
        JavaScript (use <code>#j</code> in the emit block) --
        produces output suitable for use in a JavaScript string literal
      </li>
      <li>XML (use <code>#x</code> in the emit block)</li>
      <li>URL (use <code>#u</code> in the emit block)</li>
      <li>None (use <code>#n</code> in the emit block)</li>
    </ul>

    <p>

    In addition the <em>default</em> escaping mechanism can also be
    changed.  This can be done at the template level by use of the
    <code>&lt;%escape ...%&gt;</code> tag.  For example,

    <pre class="jamon">&lt;%escape #n&gt;
&lt;% "&lt; &amp; &gt;" %&gt;
</pre>

    will produce
    <pre class="tty">&lt; &amp; &gt;
</pre>


    Finally, by using <a href="#jamonProperties">jamon.properties</a>
, escaping can be set for all templates in a
    directory and its subdirectories.  For example, if
    jamon.properties includes the line:

     <pre class="properties">
org.jamon.escape=u
</pre>
    Then templates will default to URL escaping, unless they specify
    their own default escaping with a <code>&lt;%escape ...%&gt;</code> tag.

    <h4><a name="emitMode">Mode</a></h4>

    It is possible to restrict the allowable types that can appear in
    emit directives by assigning a value to the <code>org.jamon.emitMode</code>
    in the <a href="#jamonProperties">jamon.properties</a>
 file.  The following
    values are allowed:

    <ul>
      <li><b>standard</b> - all types allowed
      <li><b>limited</b> - Strings, primitives, and boxed primitives
      <li><b>strict</b> - Strings only
    </ul>

    An attempt to emit a disallowed type will result in a Java
    compilation error when the template is compiled.

  <li><a name="FlowControl"><span class="concept">Flow control</span></a>

    <p>
      Jamon uses the following tags to handle flow control:
      <ul>
        <li>Basic for statement:
          <pre class="jamon">
&lt;%for int i = 10; i &gt;= 0; i-- %&gt;&lt;% %i %&gt;... &lt;/%for&gt;
Ready or not, here I come!
</pre>
</li>
        <li>Enhanced for statement:
          <pre class="jamon">
&lt;%for Employee employee : employees %&gt;&lt;% employee.getName() %&gt; earns &lt;% employee.getSalary() %&gt;
&lt;/%for&gt;
</pre>
</li>
        <li>While loops
          <pre class="jamon">
&lt;%while throwable != null %&gt;
Exception: throwable.getMessage()
&lt;%java throwable = throwable.getCause(); %&gt;
&lt;/%while&gt;
</pre>
</li>
        <li>If, ifelse and else statements
          <pre class="jamon">
There will be
&lt;%if attending &lt; 5 %&gt;a few&lt;%elseif attending &lt; 10%&gt;some&lt;%else&gt;lots of&lt;/%if&gt;
people attending.
&lt;/%while&gt;
</pre>

          Note that there can be zero or more
          <code>&lt;%elseif ...%&gt;</code> tags, and zero or one
          <code>&lt;%else&gt;</code> tags.  The <code>&lt;/%if&gt;</code> tag
          is mandetory.</li>
        </ul>
</li>



  <li><a name="ArbitraryJavaCode"><span class="concept">Arbitrary Java code</span></a>


    <p>
      Arbitrary Java code can be inserted into the template using
      <code>&lt;%java&gt;...&lt;/%java&gt;</code>, e.g.
    <pre class="jamon">
&lt;%java&gt;
  SimpleDateFormat dateFormat = new SimpleDateFormat("MMMM d, yyyy");
  Date birthday = person.getBirthDay();
&lt;/%java&gt;
&lt;% p.name() %&gt; was born on &lt;% dateFormat.format(birthday) %&gt;.
</pre>

    Alternatively, java code can be inserted "inline" using <code>&lt;%java ... %&gt;</code>.
    The previous example could be equivalently written as
    <pre class="jamon">
&lt;%java SimpleDateFormat dateFormat = new SimpleDateFormat("MMMM d, yyyy");
       Date birthday = person.getBirthDay(); %&gt;
&lt;% p.name() %&gt; was born on &lt;% dateFormat.format(birthday) %&gt;.
</pre>

    <p>

    The kinds of Java code that can appear is fairly
    unrestricted. Be warned, however, that code will appear inside a
    method body. Thus, for example, package declarations and import
    statements would trigger a compilation error.

  <li><a name="Inheritance"><span class="concept">Inheritance</span></a>


    Templates can inherit from other templates.  A template is an
    "abstract" template if it contains a <code>&lt;%abstract&gt;</code>
    tag.  A template extends another template by
    means of an <code>&lt;%extends <var>pathToParent</var>&gt;</code>
    tag.  There can be multiple levels of inheritance:
    <code>/grandchild</code> can extend <code>/child</code>, which
    in turn can extend <code>/parent</code>.  When Jamon encounters
    a <code>&lt;&amp; *CHILD &amp;&gt;</code> tag, it inserts the
    results of rendering the child template.

    <p>

    For example, suppose <code>/restaurant/Menu</code> contains:
    <pre class="jamon">&lt;%abstract&gt;
&lt;html&gt;
 &lt;body&gt;
   &lt;h1&gt;Menu&lt;/h1&gt;
   &lt;&amp; *CHILD &amp;&gt;
 &lt;/body&gt;
&lt;/html&gt;
</pre>

     and <code>/restaurant/Lunch</code> contains:
    <pre class="jamon">&lt;%extends /restaurant/Menu&gt;
Sandwich Jamon y Queso
</pre>


    Then rendering <code>/restaurant/Lunch</code> produces
    <pre class="tty">&lt;html&gt;
 &lt;body&gt;
   &lt;h1&gt;Menu&lt;/h1&gt;
   Sandwich Jamon y Queso

 &lt;/body&gt;
&lt;/html&gt;</pre>


  <li><a name="ClassCode"><span class="concept">Class code</span></a>


    Any code to be included in the generated class should be placed
    inside a <code>&lt;%class&gt;...&lt;/%class&gt;</code> block.  If one
    template inherits from another, there is corresponding inheritance
    of java classes.  As a result, protected members declared in a
    parent template's <code>&lt;%class&gt;...&lt;/%class&gt;</code> block
    will be visible to the child.

    <p>
    For example:
    <pre class="jamon">
&lt;%class&gt;
  static int pageViews = 1;
&lt;/%class&gt;
This component has been accessed &lt;% pageViews++ %&gt; times.
</pre>


  <li><a name="Comments"><span class="concept">Comments</span></a>


    Any template content between <code>&lt;%doc&gt;</code> and
    <code>&lt;/%doc&gt;</code> is considered "documentation", and
    ignored by the template processor

  <li><a name="Imports"><span class="concept">Imports</span></a>


    Java classes or packages to be imported and used in a template
    should be placed inside an <code>&lt;%import&gt;...&lt;/%import&gt;</code> block. Each package or class should be separated by a
    semicolon ('<code>;</code>').  Static imports are accomplished by
    preceding the imported element with the <code>static</code>
    keyword.  Note that imports are not inherited, so if you use an
    import to aid in the declaration of an argument type in a parent
    template, you must use the same import in all descendants of that
    template.
    <p>
    For example:
    <pre class="jamon">
&lt;%import&gt;
  java.util.Iterator;
  org.myorg.myapp.data.*;
  static org.myorg.myapp.Constants.*;
&lt;/%import&gt;</pre>


  <li><a name="Implements"><span class="concept">Implements</span></a>


    Templates can be declared to implement interfaces through use of the
    <code>&lt;%implements ... %&gt;</code> tag. It is not possible to
    add arbitrary public methods to generated templates, so the use of
    this is practically limited to capturing methods such as
    <code>setFoo()</code> and <code>makeRenderer()</code>.
    <p>
    For example, given
    <pre class="jamon">
interface RenderableWithInt {
  Renderer makeRenderer(int i);
}</pre>

    it's possible to declare <code>MyTemplate.jamon</code> with
    <pre class="jamon">
&lt;%implements&gt;
  RenderableWithInt;
&lt;/%implements&gt;
&lt;%args&gt;
  int i;
&lt;/%args&gt;
</pre>

    and then use it like
<pre class="jamon">
RenderableWithInt t = new MyTemplate();
i.makeRenderer(3);</pre>


  <li><a name="Annotations"><span class="concept">Annotations</span></a>


    It is possible to add class level annotations to the generated java files by use of an
    <code>&lt;%annotate ... %&gt;</code> tag.  By default, annotations are placed on both
    the generated proxy and impl classes.  An annotation can be restricted to one or the other with
    an optional <code>#impl</code> or <code>#proxy</code> suffix.
    <p>
    For example:
    <pre class="jamon">
&lt;%annotate @Deprecated %&gt;
&lt;%doc&gt;Silence complaints about imports in the proxy class&lt;/%doc&gt;
&lt;%annotate @SuppressWarnings("unused") #proxy %&gt;
&lt;%annotate @Comment("Only on the impl class") #impl %&gt;
</pre>


  <li><a name="Arguments"><span class="concept">Arguments</span></a>


    Arguments to a template are specified in
    <code>&lt;%args&gt;...&lt;/%args&gt;</code>
    blocks. Each argument consists of a type followed by the
    argument name, optionally followed by <code>=</code> and a
    default value. Each argument must appear on a separate line, and
    each argument declaration must be terminated by a semicolon.
    Note that the old style for optional arguments, where the default
    value follows a <code>=&gt;</code> instead of a
    <code>=</code>, is deprecated.

    <p>

    Arguments are usable inside any java escape or java expression
    in the template, including those in subtemplates. Top-level
    visible arguments are also usable inside
    <code>&lt;%class&gt;...&lt;/%class&gt;</code>
    blocks.  Technically, arguments are declared
    "<code>final</code>", so it is not possible to (re)assign a
    value to an argument.

    <p>

    For example:
    <pre class="jamon">
&lt;%args&gt;
  String[] nicknames = new String[0];
  Address address;
  java.util.Iterable&lt;Person&gt; friends;
&lt;/%args&gt;
Your nicknames are
&lt;ul&gt;
&lt;%for int i = 0; i &lt; nicknames.length; ++i %&gt;
    &lt;li&gt; &lt;% nicknames[i] %&gt;
&lt;/%for&gt;
&lt;/ul&gt;
&lt;%for Person p: friends %&gt;
    &lt;%if p.getAddress().getPostalCode().equals(address.getPostalCode()) %&gt;
      Hey, guess what? &lt;% p.getName() %&gt; lives close by!
    &lt;/%if&gt;
&lt;/%while&gt;
</pre>

    Note that for this template to compile, the <code>Address</code>
    class would need to appear in an
    <code>&lt;%import&gt;...&lt;/%import&gt;</code> block.

    <p>

    Arguments with default values are optional, and need not be
    specified when invoking a template. At the top-level
    (i.e. the interface to "standard" java code), optional
    arguments are implemented as "setters" on the template
    object rather than as arguments to the <code>render</code>
    method.

    <p>

    If a template inherits from another template, the arguments to
    the template's ancestors are not automatically visible to the
    child template.  They can be made visible to code in the child
    template by declaring them in <code>&lt;%xargs&gt;...&lt;/%xargs&gt;</code>
    blocks.  Unlike
    <code>&lt;%args&gt;...&lt;/%args&gt;</code> blocks,
    <code>&lt;%xargs&gt;...&lt;/%xargs&gt;</code> blocks do not specify argument
    types, since those have already been specified by a parent
    template.  Optional arguments, however, may have their default
    values redefined by the child.  For example, if
    <code>/parent</code> contains:
    <pre class="jamon">
&lt;%abstract&gt;
&lt;%args&gt;
  String name;
  String favoriteColor = "red";
  String favoriteFood = "Jamon";
  int luckyNumber = 7;
&lt;/%args&gt;
&lt;font color="&lt;% favoriteColor %&gt;"&gt;Hello &lt;% name %&gt;&lt;/font&gt;.
Would you like some &lt;% favoriteFood %&gt;?
&lt;&amp; *CHILD &amp;&gt;
Remember, today's lucky number is &lt;% luckyNumber %&gt;.
</pre>


  then <code>/child</code> might contain:
  <pre class="jamon">
&lt;%extends /parent&gt;
&lt;%args&gt;
  int temperature;
&lt;/%args&gt;
&lt;%xargs&gt;
  name;
  favoriteColor = "green"
  luckyNumber;
&lt;/%xargs&gt;
Today's temperature is
&lt;font color="&lt;% favoriteColor %&gt;"&gt;&lt;% temperature %&gt;&lt;/font&gt;, which is
&lt;%if temperature != luckyNumber %&gt; not &lt;/%if&gt; a good sign for you, &lt;% name %&gt;.
</pre>


    Note that it would be an error if <code>/child</code> tried
    referring to <code>favoriteFood</code>'s argument to
    <code>/parent</code> without referencing it in an
    <code>&lt;%xargs&gt;...&lt;%/xargs&gt;</code> block.

  <li><a name="InvokingOtherTemplates"><span class="concept">Invoking other templates</span></a>


    It is possible to invoke other templates from within a template.
    To invoke a template which takes no argument, simply write
    <code>&lt;&amp; <var>template-name</var> &amp;&gt;</code>.
    <p>

    There are two ways to pass arguments to templates: named
    parameters, and positional parameters. Templates can be invoked
    with named parameters via the
    <code>
      &lt;&amp; <var>template-name</var>;
                 <var>argument1</var> = <var>value1</var>; ...
       &amp;&gt;
    </code>
    construct.  All arguments without default values
    (i.e. <em>required</em> arguments) must be specified, but
    arguments given default values are optional.  The old-style syntax
    of having the value follow a <code>=&gt;</code> instead of a
    <code>=</code> is deprecated.

    If values are only
    being passed for required arguments, positional parameter syntax
    may be used instead.  The syntax for positional parameters is
    simply
    <code>
      &lt;&amp; <var>template-name</var>: <var>value1</var>; ... &amp;&gt;
    </code>
    With positional parameter syntax, arguments are passed in the
    order that they are declared in the
    <code>&lt;%args&gt;</code> section of the
    template.  Note that while with named parameter syntax, the
    template name is followed by a semicolon, positional parameter
    syntax follows the template name with a colon.  In each case,
    semicolons are used to separate parameters.

  <p>

    For example, suppose <code>/accounting/bill</code> contains
    <pre class="jamon">&lt;%args&gt;
  int amount;
  String payee;
  boolean overdue = false;
&lt;/%args&gt;
You owe &lt;% payee %&gt; $&lt;% amount %&gt;.  &lt;%if overdue%&gt;Pay now, or else!&lt;/%if&gt;
</pre>


    This tempate can be called in the following ways:
    <pre class="jamon">&lt;&amp; /accounting/bill; amount = 30; payee = "the phone company" &amp;&gt;
&lt;&amp; /accounting/bill; payee = "the gas company"; amount = 35 &amp;&gt;
&lt;&amp; /accounting/bill: 25; "the mechanic" &amp;&gt;
&lt;&amp; /accounting/bill; amount = 400; payee = "Dad"; overdue = true &amp;&gt;
</pre>


    resulting in something like
    <pre class="tty">You owe the phone company $30.  
You owe the gas company $35.  
You owe the mechanic $25.  
You owe Dad $400.  Pay now, or else!
</pre>


    When using positional parameter syntax to invoke templates which
    extend abstract templates, first pass the required arguments of the
    parent, and then those of the child.

  <li><a name="Subtemplates"><span class="concept">Subtemplates</span></a>


    In addition to calling other templates, a template can call
    "subtemplates" defined within a template.  Subtemplates come in
    two forms, "private" and "protected".  Subtemplates may be
    declared to accept arguments similar to templates by using
    <code>%args</code>.  Subtemplates can invoke other subtemplates in
    the same template, and can be directly or indirectly
    recursive. Arguments to subtemplates can be given default values.

    <p>


    Private subtemplates ("<def>defs</def>") can be declared via the
    <code>&lt;%def <var>def-name</var>&gt;</code>
    instruction, and are only visible within the template in which
    they are declared.

    <p>

    For example:
    <pre class="jamon">&lt;%def _row&gt;
  &lt;%args&gt;
    String name;
    int age;
  &lt;/%args&gt;
  &lt;tr&gt;
    &lt;td align="left"&gt;&lt;% name %&gt;&lt;/td&gt;
    &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td align="center"&lt;%if age &lt; 18 %&gt; bgcolor="red"&lt;/%if&gt;&gt;
      &lt;% age %&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/%def&gt;

&lt;table&gt;
&lt;%doc&gt;named parameter syntax&lt;/%doc&gt;
  &lt;&amp; _row; name = "Mickey"; age = 46 &amp;&gt;
  &lt;&amp; _row; name = "Junior"; age = 8 &amp;&gt;
&lt;%doc&gt;positional parameter syntax&lt;/%doc&gt;
  &lt;&amp; _row: "Minnie"; 25 &amp;&gt;
&lt;/table&gt;
</pre>

    produces
    <pre class="tty">&lt;table&gt;
&lt;tr&gt;
    &lt;td align="left"&gt;Mickey&lt;/td&gt;
    &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td align="center"&gt;
      46
    &lt;/td&gt;
  &lt;/tr&gt;

  &lt;tr&gt;
    &lt;td align="left"&gt;Junior&lt;/td&gt;
    &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td align="center" bgcolor="red"&gt;
      8
    &lt;/td&gt;
  &lt;/tr&gt;

&lt;tr&gt;
    &lt;td align="left"&gt;Minnie&lt;/td&gt;
    &lt;td&gt;&amp;nbsp;&lt;/td&gt;
    &lt;td align="center"&gt;
      25
    &lt;/td&gt;
  &lt;/tr&gt;

&lt;/table&gt;
</pre>

    <p>

    Protected templates ("<def>methods</def>") can be declared via
    the <code>&lt;%method <var>method-name</var>&gt;</code>
    instruction.  A method is similar to a <def>def</def>, but is
    visible to all descendants of the declaring template.  Moreover,
    a method declared in an ancestor template can be overriddden via
    the <code>&lt;%override <var>method-name</var>&gt;</code>
    instruction.  Overridden methods take the same arguments as the
    method they override, although, as with template inheritance,
    only those args declared in an <code>&lt;%xargs&gt;....&lt;/%xargs&gt;</code>
    block will be visible within
    the body of the override.  Finally, an ancestor template may
    declare an "abstract" protected subtemplate by using
    <code>&lt;%absmeth <var>method-name</var>&gt;...&lt;/%absmeth&gt;
    </code>.  The only things allowed inside an
    <code>&lt;%absmeth ...&gt;...&lt;%/absmeth&gt;</code> block are
    <code>&lt;%args&gt;...&lt;/%args&gt;</code> blocks and
    <code>&lt;%frag ...&gt;...&lt;/%frag&gt;</code> blocks.  It is an error
    for a non-abstract template to extend
    (directly or indirectly) a template with an abstract method, and
    not have that method overridden by the non-abstract template, or
    one of it's intermediate ancestors.

    For example, suppose <code>/weather/Report</code> contains:
    <pre class="jamon">&lt;%abstract&gt;
&lt;%method backgroundColor&gt;white&lt;/%method&gt;
&lt;%absmeth title&gt;
  &lt;%args&gt;
    String city;
    String dayOfWeek;
  &lt;/%args&gt;
&lt;/%absmeth&gt;
&lt;%args&gt;
  WeatherReport report;
&lt;/%args&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;
      &lt;&amp; title; city = report.getCity(); dayOfWeek = report.getDay(); &amp;&gt;
    &lt;/title&gt;
  &lt;/head&gt;
  &lt;body bgcolor="&lt;&amp; backgroundColor &amp;&gt;"&gt;
    &lt;&amp; *CHILD  &amp;&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>


    Then <code>/weather/Sunny</code> might contain:
    <pre class="jamon">&lt;%extends Report&gt;
&lt;%override title&gt;
  &lt;%xargs&gt;
    dayOfWeek;
  &lt;/%xargs&gt;
  &lt;% dayOfWeek %&gt; looks Sunny!
&lt;/%override&gt;
Head for the beach!  It's going to be sunny and beautiful.
</pre>


    resulting in something like
    <pre class="tty">
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;
      Monday looks Sunny!

    &lt;/title&gt;
  &lt;/head&gt;
  &lt;body bgcolor="white"&gt;
    Head for the beach!  It's going to be sunny and beautiful.
  &lt;/body&gt;
&lt;/html&gt;
</pre>


    However, <code>/weather/StormWarning</code> could contain:
    <pre class="jamon">&lt;%extends Report&gt;
&lt;%override title&gt;
  &lt;%xargs&gt;
    city;
  &lt;/%xargs&gt;
  Storm Warning for &lt;% city %&gt;
&lt;/%override&gt;
&lt;%override backgroundColor&gt;grey&lt;/%override&gt;
Now would be a poor time to go sailing.
</pre>

    resulting in something like
    <pre class="tty">
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;
      Storm Warning for Boston

    &lt;/title&gt;
  &lt;/head&gt;
  &lt;body bgcolor="grey"&gt;
    Now would be a poor time to go sailing.
  &lt;/body&gt;
&lt;/html&gt;
</pre>


  <li><a name="FragmentArguments"><span class="concept">Fragment arguments</span></a>


    It is possible to pass a "fragment" of a template as an argument
    to a template or subtemplate.  When passing template fragments,
    the invocation syntax must look like
    <code>&lt;&amp;| <var>target</var> ...  &amp;&gt;</code>,
    and any template content up until a closing
    <code>&lt;/&amp;&gt;</code> is considered the fragment argument.

    <p>

    In order to pass a fragment argument, the target template or
    subtemplate must declare that it expects a fragment
    argument. This is done using the
    <code>&lt;%frag <var>name</var>/&gt;</code>
    declaration, which declares that the template or subtemplate
    expects a fragment argument.

    <p>

    The fragment can be invoked in the target template or
    subtemplate like any other template or subtemplate invocation,
    simply specifying the name of the fragment argument as the
    target

    <p>

    Putting this all together, the template
    <pre class="jamon">&lt;%def _lilink&gt;
  &lt;%frag content/&gt;
  &lt;%args&gt;
    String href;
  &lt;/%args&gt;
  &lt;li&gt;&lt;a href="&lt;% href %&gt;"&gt;&lt;&amp; content &amp;&gt;&lt;/a&gt;&lt;/li&gt;\
&lt;/%def&gt;

&lt;%def _big&gt;
  &lt;%frag stuff/&gt;
&lt;font size="+4"&gt;&lt;&amp; stuff &amp;&gt;&lt;/font&gt;\
&lt;/%def&gt;

&lt;ul&gt;
  &lt;&amp;| _lilink; href = "index.html" &amp;&gt;Home&lt;/&amp;&gt;
  &lt;&amp;| _lilink; href = "faq.html" &amp;&gt;&lt;b&gt;FAQ&lt;/b&gt;&lt;/&amp;&gt;
  &lt;&amp;| _lilink; href = "toc.html" &amp;&gt;&lt;&amp;| _big &amp;&gt;Table of contents&lt;/&amp;&gt;&lt;/&amp;&gt;
&lt;/ul&gt;
</pre>

    produces
    <pre class="tty">&lt;ul&gt;
  &lt;li&gt;&lt;a href="index.html"&gt;Home&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="faq.html"&gt;&lt;b&gt;FAQ&lt;/b&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="toc.html"&gt;&lt;font size="+4"&gt;Table of contents&lt;/font&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</pre>


  <li><a name="ParametrizedFragmentArguments"><span class="concept">Parametrized fragment arguments</span></a>


    Template fragments can themselves take arguments.  The
    invocation syntax is similar to a regular template fragment with
    the addition of an
    <code>&lt;%args&gt;...&lt;/%args&gt;</code> inside the fragment.

    <p>

    To pass a parameterized template fragment to a template or
    subtemplate, the fragment and its parameters must be
    declared via a <code>&lt;%frag <var>name</var>%&gt;<var>parameters</var>&lt;/%frag&gt;</code>,
    where each parameter is a type followed by an identifier. Thus
    a <code>&lt;%frag <var>name</var>&gt;...&lt;/%frag&gt;</code> block
    is similar to a
    <code>&lt;%args&gt;...&lt;/%args&gt;</code> block, except that
    it has a name and its parameters cannot have default values.
    Inside the template or subtemplate, the parameterized
    fragment is invoked exactly like a call to a subtemplate
    whose name is the name of the fragment.

    <p>

    For example <pre class="jamon">&lt;%def _list&gt;
  &lt;%frag display&gt;
    double temperature;
  &lt;/%frag&gt;
  &lt;%args&gt;
    double[] temps;
  &lt;/%args&gt;
&lt;ul&gt;
&lt;%for int i = 0; i &lt; temps.length; i++ %&gt;\
  &lt;li&gt;&lt;&amp; display; temperature = temps[i] &amp;&gt;
&lt;/%for&gt;\
&lt;/ul&gt;
&lt;/%def&gt;

&lt;&amp;| _list; temps = new double[] { -13.0, 34.0 }  &amp;&gt;\
  &lt;%args&gt;
    double temperature;
  &lt;/%args&gt;
  &lt;%if temperature &gt; 0.0 %&gt;water at &lt;% temperature %&gt; degrees&lt;%else&gt;&lt;b&gt;ice&lt;/b&gt;&lt;/%if&gt;\
&lt;/&amp;&gt;
</pre>

    produces
    <pre class="tty">&lt;ul&gt;
  &lt;li&gt;  &lt;b&gt;ice&lt;/b&gt;
  &lt;li&gt;  water at 34.0 degrees
&lt;/ul&gt;
</pre>


  <li><a name="Context"><span class="concept">Context</span></a>

    In addition to explicit arguments, a special variable called
    <code>jamonContext</code> can optionally be passed around between some or
    all templates in a project.  To do this, first assign a value to the
    <code>org.jamon.contextType</code> property via a
    <a href="#jamonProperties">jamon.properties</a>
 file; this value should be a
    java type, or the empty string to have no jamonContext.  All templates with
    a jamonContext will have a <code>setJamonContext</code> method on their
    proxies, and a variable named <code>jamonContext</code> will be visible in
    the template.  It is an error to try calling a template that expects context
    from one that does not have a context object.  If a template inherits from
    another template which has a context variable, the child template will
    automatically have a context variable of the same type, regardless of what
    settings are specified via jamon.properties.

    <p>
    For example, to supply the protocol to use for image urls, one might include
    in <a href="#jamonProperties">jamon.properties</a>
 the line:
     <pre class="properties">
org.jamon.contextType=String
</pre>
    and then have a template image.jamon contain
   <pre class="jamon">
&lt;%args&gt;String path;&lt;/%args&gt;
&lt;img href="&lt;% jamonContext %&gt;://www.somehost.org/&lt;% path %&gt;"/&gt;
</pre>


  Since in general, one can expect to have more than one piece of data needed in
  context, it is advised that the type chosen for jamonContext be a user-defined
  java bean that can be extended with additional properties as needed.  Third
  party libraries wishing to take advantage of context should chose an interface
  for their context type, so that clients of the library can implement that
  interface, and still provide any additional context information they might
  need.

  <li><a name="jamonProperties"><span class="concept">jamon.properties</span></a>

  Certain options in template processing are expressed by properties files.
  If a file called "jamon.properties" is present in the template directory, or
  one of it's subdirectories, then all jamon templates within that directory and
  its subdirectories will be processed according to the properties set.  If a
  descendant subdirectory also contains a jamon.properties file, then properties
  set there will override properties set above.

  <p>

  Currently, there are three types of properties jamon knows about:
  <ul>
    <li><b>org.jamon.emitMode</b> - can be one of <code>standard</code>,
    <code>limited</code> or <code>strict</code>.  See the section on
    <a href="#EmitStatements">Emit Modes</a>
 for more information.
    <li><b>org.jamon.contextType</b> - sets the type for the jamon context
    variable; if this property is the empty string, then there is no context
    variable.  See the section on <a href="#Context">Context</a>
 for more
    information.
    <li><b>org.jamon.alias.<em>aliasName</em></b> - declares a
    <a href="#PathAliases">path alias</a>
 for all templates.
  </ul>

  <li><a name="Generics"><span class="concept">Generics</span></a>

    Templates can have parameterized types, otherwise known as
    <em>generics</em>.  This is primarily usefull for templates
    accepting parameterized fragments.  For example, if map.jamon
    contains <pre class="jamon">&lt;%import&gt;java.util.Map;&lt;/%import&gt;
&lt;%generic&gt;K, V&lt;/%generic&gt;
&lt;%args&gt;Map&lt;K, V&gt; map;&lt;/%args&gt;
&lt;%frag key&gt;K key;&lt;/%frag&gt;
&lt;%frag value&gt;V value;&lt;/%frag&gt;
&lt;%for Map.Entry&lt;K, V&gt; entry : map.entrySet() %&gt;\
&lt;&amp; key: entry.getKey() &amp;&gt;: &lt;&amp; value: entry.getValue() &amp;&gt;
&lt;/%for&gt;
</pre>
 then
    <pre class="jamon">&lt;%import&gt;
  java.util.*;
  java.text.*;
&lt;/%import&gt;
&lt;%java&gt;
  HashMap&lt;String, Date&gt; birthDays = new HashMap&lt;String, Date&gt;();
  birthDays.put("John", new GregorianCalendar(1940, 9, 9).getTime());
  birthDays.put("Paul", new GregorianCalendar(1942, 5, 18).getTime());
  birthDays.put("George", new GregorianCalendar(1943, 1, 25).getTime());
  birthDays.put("Ringo", new GregorianCalendar(1940, 6, 7).getTime());
  final DateFormat format = new SimpleDateFormat("EEE, MMM d, yyyy");
&lt;/%java&gt;

&lt;&amp;|| map&lt;String, Date&gt;: birthDays &amp;&gt;
  &lt;|key&gt;&lt;%args&gt;String name;&lt;/%args&gt;&lt;% name %&gt;'s birthday&lt;/|&gt;
  &lt;|value&gt;&lt;%args&gt;Date birthday;&lt;/%args&gt;&lt;% format.format(birthday) %&gt;&lt;/|&gt;
&lt;/&amp;&gt;
</pre>
 produces
    <pre class="tty">Paul's birthday: Thu, Jun 18, 1942
Ringo's birthday: Sun, Jul 7, 1940
John's birthday: Wed, Oct 9, 1940
George's birthday: Thu, Feb 25, 1943
</pre>


    <p>

  Note that abstract templates cannot have parameterized types, nor can
  subtemplates.  However, if a template has a parameterized type, that type
  is available to any subtemplates of that template.

  <li><a name="PathAliases"><span class="concept">Path aliases</span></a>


    It is possible to create aliases for path-names.  This can either be done in the template,
    or through <a href="#jamonProperties">jamon.properties</a>
.
    The basic syntax for doing it in a template is:
    <code>
      &lt;%alias&gt;
        <var>shortcut</var> = <var>/full/path</var>;
        ...
      &lt;/%alias&gt;
    </code>

    Shortcut must be a single word, without slashes; the only exception to this is that "/" may be
    made an alias, refering to the "empty" shortcut.  Already defined aliases can be used to declare
    the full path for other aliases.

    To use an alias, replace <var>/full/path//</var> with
    <var>shortcut//</var> when refering to other templates (note the
    double-slash after <var>shortcut</var>.  Aliases may only be used
    for the leading part of a path.  Note that the
    old style syntax of placing a <code>=&gt;</code> instead of a
    <code>=</code> between the shortcut and full path is deprecated.

    <p>

    For example:
    <pre class="jamon">
&lt;%alias&gt;
  / = /com/foo/bar;
  nav = //navigation;
  legal = /attorneys/documents;
&lt;/%alias&gt;

&lt;&amp; //Home &amp;&gt;  -- calls /com/foo/bar/Home
&lt;&amp; nav//Left &amp;&gt; -- calls /com/foo/bar/navigation/Left
&lt;&amp; legal/Disclaimer &amp;&gt; -- calls /attorneys/documents/Disclaimer
</pre>


    To define the same aliases as above through a
    <a href="#jamonProperties">jamon.properties</a>
 file, one would say:
    <pre class="jamon">
org.jamon.alias./=/com/foo/bar
org.jamon.alais.nav=/com/foo/bar/navigation
org.jamon.alais.legal=/attorneys/documents
</pre>

    Note that aliases defined through jamon.properties files may not make reference to other aliases
    in their definitions; the aliased path must always be specified as a full path.

  <li><a name="CharacterEncoding"><span class="concept">Character encoding</span></a>


    By default, Jamon template source files are read using the default
    encoding of the running Java platform. The specific character
    encoding can be specified in the template by including an
    <code>&lt;%encoding ...&gt;</code> declaration at the very beginning
    of the template. For example, the following declaration indicates that
    the source of the template should be parsed in UTF-8:

    <pre class="jamon">&lt;%encoding UTF-8&gt;</pre>


    The available encodings are exactly those supported by the JRE in
    use.

  </li>

</ol>


      </div>

    <div id="logo">
    <h1 id="logo1">Jamon</h1>
    <h3 id="logo2">a typed template engine for Java</h3>
    </div>


  </body>
</html>

